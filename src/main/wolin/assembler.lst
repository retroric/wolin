ca65 V2.18 - Git 31daa70
Main file   : test.s
Current file: test.s

000000r 1               ; 1: setup HEADER
000000r 1               
000000r 1               
000000r 1               ;**********************************************
000000r 1               ;*
000000r 1               ;* BASIC header
000000r 1               ;*
000000r 1               ;* compile with:
000000r 1               ;* cl65.exe -o assembler.prg -WaU -t c64 -C c64-asm.cfg -g -Ln assembler.lbl -l assembler.lst assembler.s
000000r 1               ;*
000000r 1               ;**********************************************
000000r 1                           .org 2049
000801  1                           .export LOADADDR = *
000801  1  0C 08        Bas10:      .word BasEnd
000803  1  0A 00                    .word 10
000805  1  9E                       .byte 158 ; sys
000806  1  20 32 30 36              .byte " 2064"
00080A  1  34           
00080B  1  00                       .byte 0
00080C  1  00 00        BasEnd:     .word 0
00080E  1  00 00                    .word 0
000810  1                           ;
000810  1               
000810  1               
000810  1               ; 2: label __wolin_pl_qus_wolin_plot = 65520
000810  1               
000810  1               __wolin_pl_qus_wolin_plot = 65520
000810  1               
000810  1               ; 3: label __wolin_pl_qus_wolin_chrout = 65490
000810  1               
000810  1               __wolin_pl_qus_wolin_chrout = 65490
000810  1               
000810  1               ; 4: setup SPF = 251[ubyte] , 40959[uword]
000810  1               
000810  1               
000810  1               ; prepare function stack
000810  1               __wolin_spf := 251 ; function stack ptr
000810  1               __wolin_spf_hi := 251+1 ; function stack ptr
000810  1               
000810  1               __wolin_spf_top := 40959 ; function stack top
000810  1               __wolin_spf_top_hi := 40959+1 ; function stack top
000810  1  A9 FF            lda #<__wolin_spf_top ; set function stack top
000812  1  85 FB            sta __wolin_spf
000814  1  A9 9F            lda #>__wolin_spf_top
000816  1  85 FC            sta __wolin_spf+1
000818  1               
000818  1               ; 5: setup SP = 114[ubyte]
000818  1               
000818  1               
000818  1               ; prepare program stack
000818  1               __wolin_sp_top := 114 ; program stack top
000818  1               __wolin_sp_top_hi := 114+1 ; program stack top
000818  1  A2 72            ldx #__wolin_sp_top ; set program stack top
00081A  1               
00081A  1               ; 6: setup HEAP = 176[ubyte]
00081A  1               
00081A  1               
00081A  1               __wolin_this_ptr := 176
00081A  1               __wolin_this_ptr_hi := 176+1
00081A  1               
00081A  1               
00081A  1               ; 7: alloc SPF<__wolin_pl_qus_wolin_main> , #1
00081A  1               
00081A  1               
00081A  1  38               sec
00081B  1  A5 FB            lda __wolin_spf
00081D  1  E9 01            sbc #1
00081F  1  85 FB            sta __wolin_spf
000821  1  B0 02            bcs :+
000823  1  C6 FC            dec __wolin_spf+1
000825  1               :
000825  1               
000825  1               ; 8: call __wolin_pl_qus_wolin_main[uword]
000825  1               
000825  1  20 29 08         jsr __wolin_pl_qus_wolin_main
000828  1               
000828  1               ; 9: endfunction
000828  1               
000828  1  60               rts
000829  1               
000829  1               ; 10: import _clrscr
000829  1               
000829  1               
000829  1                   .import _clrscr
000829  1               
000829  1               ; 11: import _wherex
000829  1               
000829  1               
000829  1                   .import _wherex
000829  1               
000829  1               ; 12: import _bordercolor
000829  1               
000829  1               
000829  1                   .import _bordercolor
000829  1               
000829  1               ; 13: import _strlen
000829  1               
000829  1               
000829  1                   .import _strlen
000829  1               
000829  1               ; 14: function __wolin_pl_qus_wolin_main
000829  1               
000829  1               __wolin_pl_qus_wolin_main:
000829  1               
000829  1               ; 15: alloc SPF<_strlen> , #1
000829  1               
000829  1               
000829  1  38               sec
00082A  1  A5 FB            lda __wolin_spf
00082C  1  E9 01            sbc #1
00082E  1  85 FB            sta __wolin_spf
000830  1  B0 02            bcs :+
000832  1  C6 FC            dec __wolin_spf+1
000834  1               :
000834  1               
000834  1               ; 16: save SP
000834  1               
000834  1               
000834  1  8A               txa
000835  1  48               pha
000836  1               
000836  1               ; 17: let CPU.AX[ubyte*] = #__wolin_lab_stringConst_0[uword]
000836  1               
000836  1               
000836  1  A9 62            lda #<__wolin_lab_stringConst_0
000838  1  A2 08            ldx #>__wolin_lab_stringConst_0
00083A  1               
00083A  1               
00083A  1               ; 20: call _strlen[uword]
00083A  1               
00083A  1  20 rr rr         jsr _strlen
00083D  1               
00083D  1               ; 21: let SPF(0)<pl.qus.wolin.strlen.__returnValue>[ubyte] = CPU.A
00083D  1               
00083D  1               
00083D  1  A0 00            ldy #0
00083F  1  91 FB            sta (__wolin_spf),y
000841  1               
000841  1               
000841  1               ; 22: restore SP
000841  1               
000841  1               
000841  1  68               pla
000842  1  AA               tax
000843  1               
000843  1               ; 23: free SPF<pl.qus.wolin.strlen.__returnValue> , #1
000843  1               
000843  1               
000843  1  18               clc
000844  1  A5 FB            lda __wolin_spf
000846  1  69 01            adc #1
000848  1  85 FB            sta __wolin_spf
00084A  1  90 02            bcc :+
00084C  1  E6 FC            inc __wolin_spf+1
00084E  1               :
00084E  1               
00084E  1               ; 24: let SPF(0)<pl.qus.wolin.main..x>[ubyte] = SPF(0)<pl.qus.wolin.strlen.__returnValue>[ubyte]
00084E  1               
00084E  1               
00084E  1  A0 00            ldy #0
000850  1  B1 FB            lda (__wolin_spf),y
000852  1  A0 00            ldy #0
000854  1  91 FB            sta (__wolin_spf),y
000856  1               
000856  1               
000856  1               ; 25: free SPF<__wolin_pl_qus_wolin_main> , #1
000856  1               
000856  1               
000856  1  18               clc
000857  1  A5 FB            lda __wolin_spf
000859  1  69 01            adc #1
00085B  1  85 FB            sta __wolin_spf
00085D  1  90 02            bcc :+
00085F  1  E6 FC            inc __wolin_spf+1
000861  1               :
000861  1               
000861  1               ; 26: endfunction
000861  1               
000861  1  60               rts
000862  1               
000862  1               ; 27: string __wolin_lab_stringConst_0[uword] = $"dupa"
000862  1               
000862  1               
000862  1               __wolin_lab_stringConst_0:
000862  1  44 55 50 41      .asciiz "dupa"
000866  1  00           
000867  1               
000867  1               
000867  1               
