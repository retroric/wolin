ca65 V2.18 - Git 31daa70
Main file   : assembler.s
Current file: assembler.s

000000r 1               ; 1: setup HEADER
000000r 1               
000000r 1               
000000r 1               ;**********************************************
000000r 1               ;*
000000r 1               ;* BASIC header
000000r 1               ;*
000000r 1               ;* compile with:
000000r 1               ;* cl65.exe -o assembler.prg -WaU -t c64 -C c64-asm.cfg -g -Ln assembler.lbl -l assembler.lst assembler.s
000000r 1               ;*
000000r 1               ;**********************************************
000000r 1                           .org 2049
000801  1                           .export LOADADDR = *
000801  1  0C 08        Bas10:      .word BasEnd
000803  1  0A 00                    .word 10
000805  1  9E                       .byte 158 ; sys
000806  1  20 32 30 36              .byte " 2064"
00080A  1  34           
00080B  1  00                       .byte 0
00080C  1  00 00        BasEnd:     .word 0
00080E  1  00 00                    .word 0
000810  1                           ;
000810  1               
000810  1               
000810  1               ; 2: label __wolin_pl_qus_wolin_plot = 65520
000810  1               
000810  1               __wolin_pl_qus_wolin_plot = 65520
000810  1               
000810  1               ; 3: label __wolin_pl_qus_wolin_chrout = 65490
000810  1               
000810  1               __wolin_pl_qus_wolin_chrout = 65490
000810  1               
000810  1               ; 4: setup SPF = 251[ubyte] , 40959[uword]
000810  1               
000810  1               
000810  1               ; prepare function stack
000810  1               __wolin_spf := 251 ; function stack ptr
000810  1               __wolin_spf_hi := 251+1 ; function stack ptr
000810  1               
000810  1               __wolin_spf_top := 40959 ; function stack top
000810  1               __wolin_spf_top_hi := 40959+1 ; function stack top
000810  1  A9 FF            lda #<__wolin_spf_top ; set function stack top
000812  1  85 FB            sta __wolin_spf
000814  1  A9 9F            lda #>__wolin_spf_top
000816  1  85 FC            sta __wolin_spf+1
000818  1               
000818  1               ; 5: setup SP = 114[ubyte]
000818  1               
000818  1               
000818  1               ; prepare program stack
000818  1               __wolin_sp_top := 114 ; program stack top
000818  1               __wolin_sp_top_hi := 114+1 ; program stack top
000818  1  A2 72            ldx #__wolin_sp_top ; set program stack top
00081A  1               
00081A  1               ; 6: setup HEAP = 176[ubyte]
00081A  1               
00081A  1               
00081A  1               __wolin_this_ptr := 176
00081A  1               __wolin_this_ptr_hi := 176+1
00081A  1               
00081A  1               
00081A  1               ; 7: goto __wolin_pl_qus_wolin_main[uword]
00081A  1               
00081A  1  4C 1D 08         jmp __wolin_pl_qus_wolin_main
00081D  1               
00081D  1               ; 8: import _clrscr
00081D  1               
00081D  1               
00081D  1                   .import _clrscr
00081D  1               
00081D  1               ; 9: import _wherex
00081D  1               
00081D  1               
00081D  1                   .import _wherex
00081D  1               
00081D  1               ; 10: function __wolin_pl_qus_wolin_main
00081D  1               
00081D  1               __wolin_pl_qus_wolin_main:
00081D  1               
00081D  1               ; 11: save SP
00081D  1               
00081D  1               
00081D  1  8A               txa
00081E  1  48               pha
00081F  1               
00081F  1               ; 12: call _clrscr[uword]
00081F  1               
00081F  1  20 rr rr         jsr _clrscr
000822  1               
000822  1               ; 13: restore SP
000822  1               
000822  1               
000822  1  68               pla
000823  1  AA               tax
000824  1               
000824  1               ; 14: alloc SPF<_wherex> , #1
000824  1               
000824  1               
000824  1  38               sec
000825  1  A5 FB            lda __wolin_spf
000827  1  E9 01            sbc #1
000829  1  85 FB            sta __wolin_spf
00082B  1  B0 02            bcs :+
00082D  1  C6 FC            dec __wolin_spf+1
00082F  1               :
00082F  1               
00082F  1               ; 15: save SP
00082F  1               
00082F  1               
00082F  1  8A               txa
000830  1  48               pha
000831  1               
000831  1               ; 16: call _wherex[uword]
000831  1               
000831  1  20 rr rr         jsr _wherex
000834  1               
000834  1               ; 17: restore SP
000834  1               
000834  1               
000834  1  68               pla
000835  1  AA               tax
000836  1               
000836  1               ; 18: let SPF(0)<pl.qus.wolin.main..x>[ubyte] = CPU.A
000836  1               
000836  1               
000836  1  A0 00            ldy #0
000838  1  91 FB            sta (__wolin_spf),y
00083A  1               
00083A  1               
00083A  1               ; 19: free SPF<__wolin_pl_qus_wolin_main> , #1
00083A  1               
00083A  1               
00083A  1  18               clc
00083B  1  A5 FB            lda __wolin_spf
00083D  1  69 01            adc #1
00083F  1  85 FB            sta __wolin_spf
000841  1  90 02            bcc :+
000843  1  E6 FC            inc __wolin_spf+1
000845  1               :
000845  1               
000845  1               ; 20: endfunction
000845  1               
000845  1  60               rts
000846  1               
000846  1               
